/*! pojo-forms - v1.2.2 - 17-02-2016 */
!function(e,t){"use strict";var i={lastRepeaterFieldID:1,cache:{$document:e(document),$window:e(window)},cacheElements:function(){},buildElements:function(){},bindEvents:function(){var t=this;e(document).on("pojo_metabox_repeater_new_item",".atmb-repeater-row",function(){var i=t._getNewFieldID();e(this).find("input.atmb-field-hidden.atmb-field_id").val(i),e(this).find("div.atmb-field-row.atmb-shortcode input.atmb-field-text").val(t._getFieldShortcode(i)),e(this).find("div.atmb-field-row.atmb-type select").trigger("change")}).on("change","#pojo-forms-form li.atmb-repeater-row div.atmb-field-row.atmb-type select",function(){t._onChangeFieldType(t,e(this))}),e("li.atmb-repeater-row div.atmb-field-row.atmb-type select","#pojo-forms-form").trigger("change")},_onChangeFieldType:function(e,i){var a={defaults:[],textarea:["textarea_rows"],number:["number_min","number_max"],checkbox:["inline","choices","default_value"],radio:["inline","choices"],dropdown:["choices","multiple","first_unselectable_item"],file:["file_types","file_sizes"]},n=["textarea_rows","default_value","inline","choices","multiple","first_unselectable_item","number_min","number_max","file_types","file_sizes"],l=i.closest("li.atmb-repeater-row");e._hideOrDisplayFields(l,n,"hide"),t!==a[i.val()]&&e._hideOrDisplayFields(l,a[i.val()],"display")},_hideOrDisplayFields:function(t,i,a){var n;e.each(i,function(e,i){n=t.find("div.atmb-field-row.atmb-"+i),"display"===a?n.fadeIn("fast"):n.hide()})},_getNewFieldID:function(){return this.lastRepeaterFieldID++},_getFieldShortcode:function(e){return"[form-field-"+e+"]"},_storeLastRepeaterID:function(){var t=this,i=e("#pojo-forms-form").find("input.atmb-field-hidden.atmb-field_id");i.each(function(){var i=e(this).val();""!==i&&t.lastRepeaterFieldID<i&&(t.lastRepeaterFieldID=parseInt(i,0)+1)}),i.each(function(){var i=e(this).val();""===i&&(i=t._getNewFieldID(),e(this).val(i)),e(this).closest("div.atmb-button-collapse").find("div.atmb-field-row.atmb-shortcode input.atmb-field-text").val(t._getFieldShortcode(i))})},init:function(){this.cacheElements(),this.buildElements(),this._storeLastRepeaterID(),this.bindEvents()}};e(document).ready(function(e){i.init()})}(jQuery);